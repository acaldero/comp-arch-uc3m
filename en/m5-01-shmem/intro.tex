\section{Introduction to multiprocessor architectures}

\begin{frame}[t]{Increasing importance of multiprocessors}
\begin{itemize}
  \item There is a decrease in silicon and energy efficiency as more ILP is exploited.
    \begin{itemize}
      \item Cost of silicon and energy grows faster than performance.
    \end{itemize}

  \mode<presentation>{\vfill\pause}
  \item Increasing interest in high performance servers.
    \begin{itemize}
      \item \emph{Cloud computing}, \emph{software as a service}, \ldots
    \end{itemize}

  \mode<presentation>{\vfill\pause}
  \item Data intensive applications growth.
    \begin{itemize}
      \item Huge amounts of data on the Internet.
      \item \emph{Big data analytics}.
    \end{itemize}

\end{itemize}
\end{frame}

\begin{frame}[t]{TLP: Thread level parallelism}
\begin{itemize}
  \item TLP implies the existence of multiple program counters.

    \begin{itemize}
      \mode<presentation>{\vfill}
      \item Assumes MIMD.

      \mode<presentation>{\vfill}
      \item Generalized use of TLP outside scientific computing is relatively recent.

      \mode<presentation>{\vfill}
      \item New applications:
        \begin{itemize}
          \item Embedded applications.
          \item Desktop.
          \item High-end servers.
        \end{itemize}
    \end{itemize}
\end{itemize}
\end{frame}

\begin{frame}[t]{Multiprocessors}
\begin{itemize}
  \item A \textgood{multiprocessor} is a computer consisting of highly coupled
        processors with:
    \begin{itemize}
      \item \pause\textgood{Coordination and use} typically controlled by a
            \textmark{single operating system}.
      \item \textgood{Memory sharing} through a
            \textmark{single shared memory space}.
    \end{itemize}

  \mode<presentation>{\vfill\pause}
  \item \textgood{Software models}:
    \begin{itemize}
      \item \pause\textmark{Parallel processing}: 
            Coupled set of cooperating threads.
      \item \pause\textmark{Request processing}: 
            Independent process execution originated by users.
            
      \item \pause\textmark{Multiprogramming}: 
            Independent execution of multiple applications.
    \end{itemize}

\end{itemize}
\end{frame}

\begin{frame}[t]
\begin{itemize}
  \item Most common approach:
    \begin{itemize}
      \item From 2 to tenths of processors.
      \item Shared memory.
        \begin{itemize}
          \item Implies shared memory.
          \item Does not necessarily imply a single physical memory.
        \end{itemize}
    \end{itemize}

  \mode<presentation>{\vfill\pause}
  \item \textgood{Alternatives}:
    \begin{itemize}
      \item \textmark{CMP} (\emph{Chip Multi Processors}) or \emph{multi-core}.
      \item Multiple chips.
        \begin{itemize}
          \item Each one may (or may not) be \emph{multi-core}.
        \end{itemize}
      \item \textmark{Multicomputer}: 
            Weakly coupled processors not sharing memory.
        \begin{itemize}
          \item Used in large scale scientific computing.
        \end{itemize}
    \end{itemize}
\end{itemize}
\end{frame}

\begin{frame}[t]
\begin{itemize}
  \item \textgood{Maximizing exploitation} of multiprocessors:
    \begin{itemize}
      \item With \textmark{n} processors, at least 
            \textmark{n} processes or threads are needed.
    \end{itemize}

  \mode<presentation>{\vfill\pause}
  \item Threads \textgood{identification}:
    \begin{itemize}
      \item Explicitly identified by programmer.
      \item Created by operating system from requests.
      \item Loop iterations generated by parallel compiler (e.g. OpenMP).
    \end{itemize}
\end{itemize}

\mode<presentation>{\vfill\pause}
\setbeamercolor{blockremark}{bg=cyan!60!black}
\begin{beamercolorbox}[sep=1em,wd=\textwidth]{blockremark}
High-level identification performed by programmer or system software with
threads having \textmark{enough} number of instructions to execute.
\end{beamercolorbox}

\end{frame}

\begin{frame}[t,shrink=10]{Multiprocessors and shared memory}

\vspace{-1em}
\begin{columns}[T]

\column{.5\textwidth}

\begin{block}{SMP: Symmetric Multi-Processor}
\begin{itemize}
  \item Centralized shared memory.
  \item Share a single centralized memory where all have equal access time.
  \item All multi-cores are SMP.
  \item \textmark{UMA}: Uniform Memory Access
    \begin{itemize}
      \item Memory latency is uniform.
      \item All SMPs are UMA.
    \end{itemize}
  \item \textmark{NUCA}: Non Uniform Cache Access.
    \begin{itemize}
      \item Not uniform access to LL cache.
      \item Example IBM Power.
    \end{itemize} 
\end{itemize}
\end{block}

\pause
\column{.5\textwidth}

\begin{block}{DSM: Distributed Shared Memory}
\begin{itemize}
  \item Memory is distributed across processors.
  \item Needed when the number of processors is high.
  \item \textmark{NUMA}: Non Uniform Memory Access.
    \begin{itemize}
      \item Memory latency depends on data location.
    \end{itemize}
\end{itemize}
\end{block}

\end{columns}

\mode<presentation>{\vfill\pause}

\begin{itemize}
  \item \textgood{Communication} through access to \textmark{shared address space}.
\end{itemize}
\end{frame}

\begin{frame}[t]{SMP: Symmetric Multi Processor}
\makebox[\textwidth][c]{\input{en/m5-01-shmem/smp.tkz}}
\end{frame}

\begin{frame}[t]{DSM: Distributed Shared Memory}
\makebox[\textwidth][c]{\input{en/m5-01-shmem/dsm.tkz}}
\end{frame}
